var LOCALES=["de","es","fr","pl","pt"];!function(O,p){"use strict";var o,a,B,i,c="commento",m="commento-main-area",l="commento-login",T="commento-login-box-container",H="commento-login-box",C="commento-login-box-email-subtitle",N="commento-login-box-email-input",v="commento-login-box-password-input",f="commento-login-box-name-input",h="commento-login-box-website-input",L="commento-login-box-email-button",S="commento-login-box-forgot-link-container",A="commento-login-box-login-link-container",M="commento-login-box-sso-pretext",E="commento-login-box-sso-buttton-container",R="commento-login-box-hr1",D="commento-login-box-oauth-pretext",I="commento-login-box-oauth-buttons-container",U="commento-login-box-hr2",r="commento-mod-tools",n="commento-mod-tools-lock-button",d="commento-error",s="commento-logged-container",u="commento-comments-area",k="commento-textarea-super-container-",g="commento-notice-container",x="commento-textarea-container-",b="commento-textarea-",w="commento-anonymous-checkbox-",y="commento-guest-details-",P="commento-guest-details-input-",V="commento-sort-policy-",z="commento-comment-card-",j="commento-comment-body-",q="commento-comment-text-",Y="commento-comment-subtitle-",_="commento-comment-timeago-",W="commento-comment-score-",F="commento-comment-options-",X="commento-comment-edit-",G="commento-comment-reply-",J="commento-comment-collapse-",K="commento-comment-upvote-",$="commento-comment-downvote-",Q="commento-comment-approve-",Z="commento-comment-remove-",ee="commento-comment-sticky-",te="commento-comment-children-",ne="commento-comment-contents-",oe="commento-comment-name-",ie="commento-submit-button-",re="commento-markdown-button-",ae="commento-markdown-help-",e=!1,ce=window.document.title,me="https://commento.net",le="https://commento.net",de=null,se=parent.location.pathname,ue=!1,pe=!1,ve=!1,fe=!0,he=[],ge=[],xe={},be={},we={},ye=!0,ke=!1,Te=!1,He=!1,Ce="none",Ne={},Le={},Se={},Ae={},Me=!1,Ee="login",Oe=!1,Be="score-desc",Re=void 0,De=null,Ie=navigator&&navigator.language,Ue=O.strings||{},Pe={"score-desc":"","creationdate-desc":"","creationdate-asc":""};function Ve(e){return p.getElementById(e)}function ze(e,t){e.appendChild(t)}function je(e,t){e.classList.add("commento-"+t)}function qe(e,t){null!==e&&e.classList.remove("commento-"+t)}function Ye(e){return p.createElement(e)}function _e(e){null!==e&&e.parentNode.removeChild(e)}function We(e,t){t=e.attributes[t];if(void 0!==t)return t.value}function Fe(e){if(null!==e){var t=e.cloneNode(!0);if(null!==e.parentNode)return e.parentNode.replaceChild(t,e),t}return e}function Xe(e,t,n){e.addEventListener("click",function(){t(n)},!1)}function Ge(e,t,n){e.addEventListener("keypress",function(e){"Enter"===e.key&&t(n)},!1)}function Je(e,t,n){e.setAttribute(t,n)}function Ke(e,t,n){var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onload=function(){n(JSON.parse(o.response))},o.send(JSON.stringify(t))}function $e(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){t(JSON.parse(n.response))},n.send(null)}function Qe(e){"function"==typeof e&&e()}function Ze(e,t){var n,o=new Date;o.setTime(o.getTime()+31536e6),n="; expires="+o.toUTCString(),p.cookie=e+"="+t+n+"; path=/"}function et(e){return e in Ue?Ue[e]:e}function tt(){var e=function(e){if(2===(e=("; "+p.cookie).split("; "+e+"=")).length)return e.pop().split(";").shift()}("commentoCommenterToken");return void 0===e?"anonymous":e}function nt(){window.open(me+"/profile?commenterToken="+tt(),"_blank")}function ot(e){window.open(me+"/unsubscribe?unsubscribeSecretHex="+e,"_blank")}function it(e,t){we[e.commenterHex]=e,Re=e.commenterHex;var n,o,i=Ye("div"),r=Ye("div");"undefined"!==e.link?((n=Ye("a")).target="_blank",n.rel="nofollow noopener"):n=Ye("div");var a=Ye("div"),c=Ye("div"),m=Ye("div"),l=xt(e.commenterHex+"-"+e.name);i.id=s,je(i,"logged-container"),je(r,"logged-in-as"),je(n,"name"),je(a,"profile-button"),je(c,"profile-button"),je(m,"profile-button"),n.innerText=e.name,a.innerHTML='<svg width="20px" height="20px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g><g><path d="M467.812,431.851l-36.629-61.056c-16.917-28.181-25.856-60.459-25.856-93.312V224c0-67.52-45.056-124.629-106.667-143.04V42.667C298.66,19.136,279.524,0,255.993,0s-42.667,19.136-42.667,42.667V80.96C151.716,99.371,106.66,156.48,106.66,224v53.483c0,32.853-8.939,65.109-25.835,93.291l-36.629,61.056c-1.984,3.307-2.027,7.403-0.128,10.752c1.899,3.349,5.419,5.419,9.259,5.419H458.66c3.84,0,7.381-2.069,9.28-5.397C469.839,439.275,469.775,435.136,467.812,431.851z"/></g></g><g><g><path d="M188.815,469.333C200.847,494.464,226.319,512,255.993,512s55.147-17.536,67.179-42.667H188.815z"/></g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>',c.innerHTML='<svg width="20px" height="20px" enable-background="new 0 0 24 24" height="512" viewBox="0 0 24 24" width="512" xmlns="http://www.w3.org/2000/svg"><path d="m22.683 9.394-1.88-.239c-.155-.477-.346-.937-.569-1.374l1.161-1.495c.47-.605.415-1.459-.122-1.979l-1.575-1.575c-.525-.542-1.379-.596-1.985-.127l-1.493 1.161c-.437-.223-.897-.414-1.375-.569l-.239-1.877c-.09-.753-.729-1.32-1.486-1.32h-2.24c-.757 0-1.396.567-1.486 1.317l-.239 1.88c-.478.155-.938.345-1.375.569l-1.494-1.161c-.604-.469-1.458-.415-1.979.122l-1.575 1.574c-.542.526-.597 1.38-.127 1.986l1.161 1.494c-.224.437-.414.897-.569 1.374l-1.877.239c-.753.09-1.32.729-1.32 1.486v2.24c0 .757.567 1.396 1.317 1.486l1.88.239c.155.477.346.937.569 1.374l-1.161 1.495c-.47.605-.415 1.459.122 1.979l1.575 1.575c.526.541 1.379.595 1.985.126l1.494-1.161c.437.224.897.415 1.374.569l.239 1.876c.09.755.729 1.322 1.486 1.322h2.24c.757 0 1.396-.567 1.486-1.317l.239-1.88c.477-.155.937-.346 1.374-.569l1.495 1.161c.605.47 1.459.415 1.979-.122l1.575-1.575c.542-.526.597-1.379.127-1.985l-1.161-1.494c.224-.437.415-.897.569-1.374l1.876-.239c.753-.09 1.32-.729 1.32-1.486v-2.24c.001-.757-.566-1.396-1.316-1.486zm-10.683 7.606c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z"/></svg>',m.innerHTML='<svg viewBox="0 0 512.00533 512" width="20px" height="20px" xmlns="http://www.w3.org/2000/svg"><path d="m320 277.335938c-11.796875 0-21.332031 9.558593-21.332031 21.332031v85.335937c0 11.753906-9.558594 21.332032-21.335938 21.332032h-64v-320c0-18.21875-11.605469-34.496094-29.054687-40.554688l-6.316406-2.113281h99.371093c11.777344 0 21.335938 9.578125 21.335938 21.335937v64c0 11.773438 9.535156 21.332032 21.332031 21.332032s21.332031-9.558594 21.332031-21.332032v-64c0-35.285156-28.714843-63.99999975-64-63.99999975h-229.332031c-.8125 0-1.492188.36328175-2.28125.46874975-1.027344-.085937-2.007812-.46874975-3.050781-.46874975-23.53125 0-42.667969 19.13281275-42.667969 42.66406275v384c0 18.21875 11.605469 34.496093 29.054688 40.554687l128.386718 42.796875c4.351563 1.34375 8.679688 1.984375 13.226563 1.984375 23.53125 0 42.664062-19.136718 42.664062-42.667968v-21.332032h64c35.285157 0 64-28.714844 64-64v-85.335937c0-11.773438-9.535156-21.332031-21.332031-21.332031zm0 0"/><path d="m505.75 198.253906-85.335938-85.332031c-6.097656-6.101563-15.273437-7.9375-23.25-4.632813-7.957031 3.308594-13.164062 11.09375-13.164062 19.714844v64h-85.332031c-11.777344 0-21.335938 9.554688-21.335938 21.332032 0 11.777343 9.558594 21.332031 21.335938 21.332031h85.332031v64c0 8.621093 5.207031 16.40625 13.164062 19.714843 7.976563 3.304688 17.152344 1.46875 23.25-4.628906l85.335938-85.335937c8.339844-8.339844 8.339844-21.824219 0-30.164063zm0 0"/></svg>',Xe(m,O.logout),Xe(a,ot,t.unsubscribeSecretHex),Xe(c,nt),Je(i,"style","display: none"),"undefined"!==e.link&&Je(n,"href",e.link),"undefined"===e.photo?((o=Ye("div")).style.background=l,o.innerHTML=e.name[0].toUpperCase(),je(o,"avatar")):(Je(o=Ye("img"),"src",le+"/api/commenter/photo?commenterHex="+e.commenterHex),Je(o,"loading","lazy"),je(o,"avatar-img")),ze(r,o),ze(r,n),ze(i,r),ze(i,m),"commento"===e.provider&&ze(i,c),ze(i,a),i=i,de.prepend(i),ve=!0}function rt(t){if("anonymous"===tt())return ve=!1,void Qe(t);var e={commenterToken:tt()};Ke(me+"/api/commenter/self",e,function(e){return e.success?(it(e.commenter,e.email),Bt()):Ze("commentoCommenterToken","anonymous"),void Qe(t)})}function at(e,t){var n,o,i=Ye("link"),r=p.getElementsByTagName("head")[0];i.type="text/css",Je(i,"href",e),Je(i,"rel","stylesheet"),n=t,i.addEventListener("load",function(){n(o)}),ze(r,i)}function ct(r,a){var e={commenterToken:tt(),domain:parent.location.host,path:se};Ke(me+"/api/comment/list",e,function(e){if(!a){if(!e.success)return void mt(e.message,!0);lt(),Be=e.defaultSortPolicy}ye=e.requireIdentification,ke=e.isModerator,Te=e.isFrozen,He=e.attributes.isLocked,Ce=e.attributes.stickyCommentHex;var t=[];for(o in he)t.push(he[o].commentHex);if(he=e.comments,!fe)for(var n in he)-1===t.indexOf(he[n].commentHex)&&(xe[he[n].commentHex]=!0);for(var o=ge.length;o--;)for(var n in he)if(he[n].commentHex===ge[o].commentHex){ge.splice(o,1),xe[he[n].commentHex]=!0;break}he=he.concat(ge),be=Ht(he),we=Object.assign({},we,e.commenters),Ae=e.configuredOauths;var i=Ve(".commento-card");if(i)for(var o in i)removeClass(i[o],"highlight");fe=!1,Qe(r)})}function mt(e,t){var n;""!==e&&(n=gt(e),t?ze(Ve(c),n):(ze(Ve(g),n),setTimeout(function(){n.remove()},5e3)))}function lt(){Je(Ve(d),"style","display: none;")}function dt(e){var t=Ve(k+e),n=Ve(re+e),o=Ye("table"),i=Ye("tr"),r=Ye("td"),a=Ye("td"),c=Ye("tr"),m=Ye("td"),l=Ye("td"),d=Ye("tr"),s=Ye("td"),u=Ye("td"),p=Ye("tr"),v=Ye("td"),f=Ye("td"),h=Ye("tr"),g=Ye("td"),x=Ye("td"),b=Ye("tr"),w=Ye("td"),y=Ye("td");o.id=ae+e,je(o,"markdown-help"),m.innerHTML=et("<b>bold</b>"),l.innerHTML=et("surround text with <pre>**two asterisks**</pre>"),r.innerHTML=et("<i>italics</i>"),a.innerHTML=et("surround text with <pre>*asterisks*</pre>"),s.innerHTML=et("<pre>code</pre>"),u.innerHTML=et("surround text with <pre>`backticks`</pre>"),v.innerHTML=et("<strike>strikethrough</strike>"),f.innerHTML=et("surround text with <pre>~~two tilde characters~~</pre>"),g.innerHTML=et('<a href="https://example.com">hyperlink</a>'),x.innerHTML=et("<pre>[link](https://example.com)</pre> or just a bare URL"),w.innerHTML=et("<blockquote>quote</blockquote>"),y.innerHTML=et("prefix with <pre>&gt;</pre>"),Xe(Fe(n),st,e),ze(i,r),ze(i,a),ze(o,i),ze(c,m),ze(c,l),ze(o,c),ze(h,g),ze(h,x),ze(o,h),ze(d,s),ze(d,u),ze(o,d),ze(p,v),ze(p,f),ze(o,p),ze(b,w),ze(b,y),ze(o,b),ze(t,o)}function st(e){var t=Ve(re+e),n=Ve(ae+e);Xe(t=Fe(t),dt,e),_e(n)}function ut(e){var t=Ve(y+e),e=Ve(w+e);ve||(e.checked?je:qe)(t,"make-invisible")}function pt(){for(var e=p.getElementsByClassName("commento-guest-details-container"),t=0;t<e.length;t++)je(e[t],"make-invisible")}function vt(t,n){var e,o=Ye("div"),i=Ye("div"),r=Ye("textarea"),a=Ye("div"),c=Ye("input"),m=Ye("label"),l=Ye("button"),d=Ye("a"),s=Ye("div"),u=Ye("input"),p=Ye("br");return o.id=k+t,i.id=x+t,r.id=b+t,s.id=y+t,u.id=P+t,c.id=w+t,l.id=ie+t,d.id=re+t,je(i,"textarea-container"),je(a,"round-check"),je(a,"anonymous-checkbox-container"),je(l,"button"),je(l,"submit-button"),je(d,"markdown-button"),je(o,"button-margin"),je(u,"guest-details"),je(s,"guest-details-container"),je(p,"clear"),Je(r,"placeholder",et("Add a comment")),Je(c,"type","checkbox"),Je(m,"for",w+t),Je(u,"type","text"),Je(u,"placeholder",et("Your Name")),m.innerText=et("Comment anonymously"),l.innerText=et(!0===n?"Save Changes":"Add Comment"),d.innerHTML=et("<b>M &#8595;</b> &nbsp; Markdown Help?"),Me&&(c.checked=!0,c.setAttribute("disabled",!0)),Xe(c,ut,t),ve&&je(s,"make-invisible"),r.oninput=(e=r,function(){e.style.height="",e.style.height=Math.min(Math.max(e.scrollHeight,75),400)+"px"}),r.onkeydown=function(e){13===e.keyCode&&(e.metaKey||e.ctrlKey)&&(!0===n?Tt:St)(t)},Xe(l,!0===n?Tt:St,t),Xe(d,dt,t),ze(i,r),ze(o,i),ze(o,s),ze(a,c),ze(a,m),ze(o,l),ye||!0===n||(ze(o,a),ze(s,u)),ze(o,d),ze(o,p),o}function ft(e){qe(Ve(V+Be),"sort-policy-button-selected");var t=Ve(u);Be=e;var n=yt(be,"root");n&&Nt(t,n),je(Ve(V+e),"sort-policy-button-selected")}function ht(e){var t=Ye("div"),n=Ye("div"),o=Ve(m),i=Ye("div"),r=Ye("div");t.id=l,i.id=g,r.id=u,ze(o,i),je(t,"login"),je(n,"login-text"),je(r,"comments"),n.innerText=et("Login"),r.innerHTML="",Xe(n,O.loginBoxShow,null);var a=0;Object.keys(Ae).forEach(function(e){Ae[e]&&a++}),0<a?ze(t,n):ye||(Me=!0),ve?_e(Ve(l)):ze(o,t),ze(o,He?gt(et("This thread is locked. You cannot add new comments.")):Te?gt(et("This domain is frozen. Comments have been disabled.")):vt("root")),0<he.length&&ze(o,function(){var e,t=Ye("div"),n=Ye("div");for(e in je(t,"sort-policy-buttons-container"),je(n,"sort-policy-buttons"),Pe){var o=Ye("a");o.id=V+e,je(o,"sort-policy-button"),e===Be&&je(o,"sort-policy-button-selected"),o.innerText=Pe[e],Xe(o,ft,e),ze(n,o)}return ze(t,n),t}()),ze(o,r),ze(de,o),Qe(e)}function gt(e){var t=Ye("div");return je(t,"moderation-notice"),t.innerText=e,t}function xt(e){for(var t=["#396ab1","#da7c30","#3e9651","#cc2529","#922428","#6b4c9a","#535154"],n=0,o=0;o<e.length;o++)n+=e.charCodeAt(o);return t[n%t.length]}function bt(e){return 1!==e&&-1!==e?e+et(" points"):e+et(" point")}O.logout=function(){Ze("commentoCommenterToken","anonymous"),ke=ve=!1,Re=void 0,t()},O.commentNew=function(n,o,i){var r,e,a=Ve(k+n),c=Ve(b+n),m=Ve(G+n),l=c.value;Ve(ie+n).disabled=!0,""!==l?(qe(c,"red-border"),r="",!Ve(P+n)||ye||Ve(w+n).checked||(r=Ve(P+n).value),e={commenterToken:o,anonName:r,domain:parent.location.host,path:se,parentHex:n,markdown:l},Ke(me+"/api/comment/new",e,function(e){var t;Ve(ie+n).disabled=!1,e.success?(lt(),t="","unapproved"===e.state?t=et("Your comment is under moderation."):"flagged"===e.state&&(t=et("Your comment was flagged as spam and is under moderation.")),""!==t&&mt(t),"anonymous"===(t=void 0===(t=Re)||"anonymous"===o?"anonymous":t)&&!Ve(w+n).checked&&Ve(P+n)&&0<Ve(P+n).value.trim().length&&(we[t=n]={provider:"anon",name:r,photo:"undefined",link:""}),t={commentHex:e.commentHex,commenterHex:t,markdown:l,html:e.html,parentHex:n,score:0,state:"approved",direction:0,creationDate:new Date},"unapproved"===e.state&&(t.state="pending"),he.push(t),ge.push(t),xe[e.commentHex]=!0,be=Ht(he),"root"!==n?(a.remove(),delete Ne[n],je(m,"option-reply"),qe(m,"option-cancel"),m.title=et("Reply to this comment"),Xe(m,O.replyShow,n)):c.value="",Ct(),t=Ve(z+e.commentHex).getBoundingClientRect().top+window.pageYOffset-40,window.scrollTo({top:t,behavior:"smooth"}),Qe(i)):mt(e.message)})):je(c,"red-border")};var wt={"score-desc":function(e,t){return t.score-e.score},"creationdate-desc":function(e,t){return e.creationDate<t.creationDate?1:-1},"creationdate-asc":function(e,t){return e.creationDate<t.creationDate?-1:1}};function yt(S,A){var e=S[A];if(!e||!e.length)return null;e.sort(function(e,t){return e.deleted||e.commentHex!==Ce?t.deleted||t.commentHex!==Ce?wt[Be](e,t):1/0:-1/0});var M=(new Date).getTime(),E=Ye("div");return e.forEach(function(e){var t,n,o,i,r,a=we[e.commenterHex],c=Ye("div"),m=Ye("div"),l=Ye("div"),d=Ye("div"),s=Ye("div"),u=Ye("div"),p=Ye("div"),v=Ye("div"),f=Ye("button"),h=Ye("button"),g=Ye("button"),x=Ye("button"),b=Ye("button"),w=Ye("button"),y=Ye("button"),k=Ye("button"),T=yt(S,e.commentHex),H=Ye("div"),C=Ye("a"),N=xt(e.commenterHex+"-"+a.name);"undefined"!==a.link&&"https://undefined"!==a.link&&""!==a.link?((n=Ye("a")).target="_blank",n.rel="nofollow noopener"):n=Ye("div"),c.id=z+e.commentHex,u.id=j+e.commentHex,p.id=q+e.commentHex,l.id=Y+e.commentHex,d.id=_+e.commentHex,s.id=W+e.commentHex,v.id=F+e.commentHex,f.id=X+e.commentHex,h.id=G+e.commentHex,g.id=J+e.commentHex,x.id=K+e.commentHex,b.id=$+e.commentHex,w.id=Q+e.commentHex,y.id=Z+e.commentHex,k.id=ee+e.commentHex,T&&(T.id=te+e.commentHex),H.id=ne+e.commentHex,n.id=oe+e.commentHex,C.href="#commento-"+e.commentHex,C.innerText=et("permalink"),C.onclick=function(){window.location.hash="#commento-"+e.commentHex,Dt(),Ct()},g.title=et("Collapse children"),x.title=et("Upvote"),b.title=et("Downvote"),f.title=et("Edit"),h.title=et("Reply"),w.title=et("Approve"),y.title=et("Remove"),Ce===e.commentHex?k.title=et(ke?"Unsticky":"This comment has been stickied"):k.title=et("Sticky"),d.title=e.creationDate.toLocaleDateString(Ie),c.style.borderLeft="2px solid "+N,e.deleted?n.innerText=et("[deleted]"):n.innerText=a.name,p.innerHTML=e.html,d.innerHTML=(o=M,i=e.creationDate,r=2592e6,(i=o-i)<5e3?"just now":i<12e4?Math.round(i/1e3)+et(" seconds ago"):i<72e5?Math.round(i/6e4)+et(" minutes ago"):i<1728e5?Math.round(i/36e5)+et(" hours ago"):i<5184e6?Math.round(i/864e5)+et(" days ago"):i<62208e6?Math.round(i/r)+et(" months ago"):Math.round(i/31104e6)+et(" years ago")),s.innerText=bt(e.score),"undefined"===a.photo?((t=Ye("div")).style.background=N,"anonymous"===e.commenterHex?(t.innerHTML="?",t.style["font-weight"]="bold"):(t.innerHTML=a.name[0].toUpperCase(),"[deleted]"===a.name&&(t.innerHTML="?")),je(t,"avatar")):(Je(t=Ye("img"),"src",le+"/api/commenter/photo?commenterHex="+a.commenterHex),je(t,"avatar-img")),je(c,"card"),ke&&"approved"!==e.state&&je(c,"dark-card"),"anon"===a.provider&&je(n,"anonymous"),a.isModerator&&je(n,"moderator"),"pending"===e.state&&je(n,"pending"),"flagged"===e.state&&je(n,"flagged"),xe[e.commentHex]&&(je(c,"highlight"),delete xe[e.commentHex]),je(m,"header"),je(n,"name"),je(C,"permalink"),je(l,"subtitle"),je(d,"timeago"),je(s,"score"),je(u,"body"),je(v,"options"),De&&je(v,"options-mobile"),je(f,"option-button"),je(f,"option-edit"),je(h,"option-button"),je(h,"option-reply"),je(g,"option-button"),je(g,"option-collapse"),je(x,"option-button"),je(x,"option-upvote"),je(b,"option-button"),je(b,"option-downvote"),je(w,"option-button"),je(w,"option-approve"),je(y,"option-button"),je(y,"option-remove"),je(k,"option-button"),Ce===e.commentHex?je(k,"option-unsticky"):je(k,"option-sticky"),ve&&(0<e.direction?je(x,"upvoted"):e.direction<0&&je(b,"downvoted")),Xe(f,O.editShow,e.commentHex),Xe(g,O.commentCollapse,e.commentHex),Xe(w,O.commentApprove,e.commentHex),Xe(y,O.commentDelete,e.commentHex),Xe(k,O.commentSticky,e.commentHex);N=kt(x,b,e.commentHex,e.direction),x=N[0],b=N[1];Xe(h,O.replyShow,e.commentHex),"undefined"!==a.link&&"https://undefined"!==a.link&&""!==a.link&&Je(n,"href",a.link),T&&ze(v,g),e.deleted||Te||He||(ze(v,b),ze(v,x)),e.commenterHex===Re?ze(v,f):e.deleted||Te||He||ze(v,h),!e.deleted&&ke&&"root"===A&&ze(v,k),e.deleted||!ke&&e.commenterHex!==Re||ze(v,y),ke&&"approved"!==e.state&&ze(v,w),e.deleted||ke||Ce!==e.commentHex||ze(v,k),Je(v,"style","width: "+32*(v.childNodes.length+1)+"px;");for(var L=0;L<v.childNodes.length;L++)Je(v.childNodes[L],"style","right: "+32*L+"px;");ze(l,s),ze(l,d),De||ze(m,v),ze(m,t),ze(m,n),ze(m,l),ze(u,p),ze(u,C),ze(H,u),De&&(ze(H,v),je(u=Ye("div"),"options-clearfix"),ze(H,u)),T&&(je(T,"body"),ze(H,T)),ze(c,m),ze(c,H),e.deleted&&("true"===B||null===T)||ze(E,c)}),0===E.childNodes.length?null:E}function kt(e,t,n,o){return e=Fe(e),t=Fe(t),0<o?(Xe(e,O.vote,[n,[1,0]]),Xe(t,O.vote,[n,[1,-1]])):o<0?(Xe(e,O.vote,[n,[-1,1]]),Xe(t,O.vote,[n,[-1,0]])):(Xe(e,O.vote,[n,[0,1]]),Xe(t,O.vote,[n,[0,-1]])),[e,t]}function Tt(o){var e,t=Ve(b+o),i=t.value;""!==i?(qe(t,"red-border"),e={commenterToken:tt(),commentHex:o,markdown:i},Ke(me+"/api/comment/edit",e,function(e){var t,n;e.success?(lt(),Ht(he),be[o].markdown=i,be[o].html=e.html,n=Ve(X+o),(t=Ve(k+o)).innerHTML=be[o].html,t.id=q+o,delete Le[o],xe[o]=!0,je(n,"option-edit"),qe(n,"option-cancel"),n.title=et("Edit comment"),Xe(n=Fe(n),O.editShow,o),n="","unapproved"===e.state?n=et("Your comment is under moderation."):"flagged"===e.state&&(n=et("Your comment was flagged as spam and is under moderation.")),""!==n&&mt(n)):mt(e.message)})):je(t,"red-border")}function Ht(e){var o={};return e.forEach(function(e,t){var n=e.parentHex;n in o||(o[n]=[]),e.creationDate=new Date(e.creationDate),o[n].push(e),be[e.commentHex]={html:e.html,markdown:e.markdown,index:t}}),o}function Ct(){var e=Ve(u),t=yt(be,"root");t&&Nt(e,t)}function Nt(e,t){for(var n in 0===e.children.length&&(e.innerHTML="<div></div>"),morphdom(e.children[0],t,{onBeforeNodeDiscarded:function(e){return!(-1<e.innerHTML.indexOf("textarea"))},onBeforeNodeAdded:function(e){return!(e.id.split("-")[3]in Le)&&e}}),Se)O.commentCollapse(n);for(var n in Ne)Ne[n]=!1,O.replyShow(n,!0);for(var n in Le)Le[n]=!1,O.editShow(n,!0)}function Lt(e){ve?O.commentNew(e,tt()):O.loginBoxShow(e)}function St(e){var t,n;ye?Lt(e):(n=Ve(w+e),""!==(t=Ve(b+e)).value.trim()?(qe(t,"red-border"),n.checked||0!==Ve(P+e).value.trim().length?(n=e,O.commentNew(n,"anonymous")):Lt(e)):je(t,"red-border"))}function At(e,t,n){Ke(me+"/api/commenter/login",{email:e,password:t},function(e){return e.success?(lt(),Ze("commentoCommenterToken",e.commenterToken),it(e.commenter,e.email),Bt(),pt(),_e(Ve(l)),void(null!==n?O.commentNew(n,e.commenterToken,function(){O.loginBoxClose(),ct(Ct)}):(O.loginBoxClose(),ct(Ct)))):(O.loginBoxClose(),void mt(e.message))})}function Mt(t){var e={isLocked:He,stickyCommentHex:Ce},e={commenterToken:tt(),domain:parent.location.host,path:se,attributes:e};Ke(me+"/api/page/update",e,function(e){e.success?(lt(),Qe(t)):mt(e.message)})}function Et(){var e=Ye("div"),t=Ye("button");e.id=r,t.id=n,je(e,"mod-tools"),t.innerHTML=et(He?"Unlock Thread":"Lock Thread"),Xe(t,O.threadLockToggle),Je(e,"style","display: none"),ze(e,t),ze(de,e)}function Ot(){void 0===o?Bt():at(o,Bt)}function Bt(){var e=Ve(m),t=Ve(r),n=Ve(s);Je(e,"style",""),ke&&Je(t,"style",""),n&&Je(n,"style","")}function Rt(){for(var e,t=p.getElementsByTagName("script"),n=0;n<t.length;n++)t[n].src.match(/\/js\/commento\.js$/)&&(void 0!==(e=We(t[n],"data-page-id"))&&(se=e),o=We(t[n],"data-css-override"),i=We(t[n],"data-auto-init"),ue=We(t[n],"data-no-websockets"),pe=We(t[n],"data-no-livereload"),void 0===(c=We(t[n],"data-id-root"))&&(c="commento"),a=We(t[n],"data-no-fonts"),B=We(t[n],"data-hide-deleted"),void 0!==(e=We(t[n],"data-locale"))&&(Ie=e))}function Dt(){var e,t;window.location.hash&&(window.location.hash.startsWith("#commento-")?(e="",e=window.location.hash.startsWith("#commento-comment-card")?window.location.hash.split("-")[3]:window.location.hash.split("-")[1],null!==(t=Ve(z+e))?(je(t,"highlight"),t.scrollIntoView({behavior:"smooth"})):64===e.length&&mt("The comment you're looking for no longer exists or was deleted.")):window.location.hash.startsWith("#commento")&&de.scrollIntoView({behavior:"smooth"}))}function t(e){de.innerHTML="",Ne={},Le={},O.main(e)}function It(){(e=me.split(":"))[0]="https:"===location.protocol?"wss":"ws";var e=e.join(":"),t=new WebSocket(e+"/ws");t.onopen=function(){t.send(parent.location.host+se)},t.onmessage=function(){window.document.title="(*) "+ce,ct(Ct,!0)},t.onclose=function(e){console.log("Socket is closed. Reconnect will be attempted with an exponential backoff.",e.reason),setTimeout(It,1e3)},t.onerror=function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),t.close()}}function Ut(){function t(){window.document.title=ce}e||(Rt(),pe||(window.WebSocket&&!ue?(It(),window.setInterval(function(){Ct()},6e4)):window.setInterval(function(){ct(Ct,!0)},5e3),["mousedown","mousemove","keydown","scroll","touchstart"].forEach(function(e){p.addEventListener(e,t,!0)})),e=!0,function(n){if(Ie&&LOCALES){for(var e,t=0;t<LOCALES.length;t++){if(Ie===LOCALES[t]){e=Ie;break}e||Ie.substring(0,2)!==LOCALES[t]||(e=LOCALES[t])}e?$e(le+"/i18n/"+e+".json",function(e){for(var t in e)t in Ue||(Ue[t]=e[t]);Qe(n)}):Qe(n)}else Qe(n)}(function(){"true"===i||void 0===i?O.main(void 0):"false"!==i&&console.log("[commento] error: invalid value for data-auto-init; allowed values: true, false")}))}O.commentApprove=function(i){var e={commenterToken:tt(),commentHex:i};Ke(me+"/api/comment/approve",e,function(e){var t,n,o;e.success?(lt(),t=Ve(z+i),n=Ve(oe+i),o=Ve(Q+i),qe(t,"dark-card"),qe(n,"flagged"),_e(o)):mt(e.message)})},O.commentDelete=function(n){var e;confirm(et("Are you sure you want to delete this comment?"))&&(e={commenterToken:tt(),commentHex:n},Ke(me+"/api/comment/delete",e,function(e){var t;e.success?(lt(),(t=Ve(z+n)).parentNode.removeChild(t),delete be[n]):mt(e.message)}))},O.vote=function(e){if(ve){var t,n=e[0],o=e[1][0],i=e[1][1],r=Ve(K+n),a=Ve($+n),c=Ve(W+n),m={commenterToken:tt(),commentHex:n,direction:i},e=kt(r,a,n,i),r=e[0],a=e[1];for(t in qe(r,"upvoted"),qe(a,"downvoted"),0<i?je(r,"upvoted"):i<0&&je(a,"downvoted"),c.innerText=bt(parseInt(c.innerText.replace(/[^\d-.]/g,""))+i-o),he)he[t].commentHex===n&&(he[t].score=he[t].score+i-o);be=Ht(he),Ct(),Ke(me+"/api/comment/vote",m,function(e){e.success?lt():(mt(e.message),qe(r,"upvoted"),qe(a,"downvoted"),c.innerText=bt(parseInt(c.innerText.replace(/[^\d-.]/g,""))-i+o),kt(r,a,n,o))})}else O.loginBoxShow(null)},O.editShow=function(e,t){var n,o;e in Le&&Le[e]||(n=Ve(q+e),Le[e]=!0,t||(n.replaceWith(vt(e,!0)),o=Ve(b+e),Ht(he),o.value=be[e].markdown),qe(o=Ve(X+e),"option-edit"),je(o,"option-cancel"),o.title=et("Cancel edit"),Xe(o=Fe(o),O.editCollapse,e))},O.editCollapse=function(e){var t=Ve(X+e),n=Ve(k+e);n.innerHTML=be[e].html,n.id=q+e,delete Le[e],je(t,"option-edit"),qe(t,"option-cancel"),t.title=et("Edit comment"),Xe(t=Fe(t),O.editShow,e)},O.replyShow=function(e,t){var n,o;e in Ne&&Ne[e]||(n=Ve(q+e),t||(o=n,n=vt(e),o.parentNode.insertBefore(n,o.nextSibling)),Ne[e]=!0,qe(o=Ve(G+e),"option-reply"),je(o,"option-cancel"),o.title=et("Cancel reply"),Xe(o=Fe(o),O.replyCollapse,e))},O.replyCollapse=function(e){var t=Ve(G+e),n=Ve(k+e);n?(n.remove(),delete Ne[e],je(t,"option-reply"),qe(t,"option-cancel"),t.title=et("Reply to this comment"),Xe(t=Fe(t),O.replyShow,e)):O.replyShow(e)},O.commentCollapse=function(e){var t=Ve(te+e),n=Ve(J+e);Se[e]=!0,t&&je(t,"hidden"),qe(n,"option-collapse"),je(n,"option-uncollapse"),n.title=et("Expand children"),Xe(n=Fe(n),O.commentUncollapse,e)},O.commentUncollapse=function(e){var t=Ve(te+e),n=Ve(J+e);delete Se[e],t&&qe(t,"hidden"),qe(n,"option-uncollapse"),je(n,"option-collapse"),n.title=et("Collapse children"),Xe(n=Fe(n),O.commentCollapse,e)},O.commentoAuth=function(e){var n=e.provider,o=e.id,i=window.open("","_blank");$e(me+"/api/commenter/token/new",function(t){var e;t.success?(lt(),Ze("commentoCommenterToken",t.commenterToken),i.location=me+"/api/oauth/"+n+"/redirect?commenterToken="+t.commenterToken,e=setInterval(function(){i.closed&&(clearInterval(e),rt(function(){var e=Ve(s);e&&Je(e,"style",""),"anonymous"!==tt()&&(_e(Ve(l)),pt()),null!==o?O.commentNew(o,t.commenterToken,function(){O.loginBoxClose(),ct(Ct)}):(O.loginBoxClose(),ct(Ct))}))},250)):mt(t.message)})},O.nextInput=function(o,i){return function(e){var t=Array.prototype.slice.call(p.querySelectorAll(".commento-input")),n=t.indexOf(o);n>=t.length-1?i(e):(console.log(t[n+1]),t[n+1].focus())}},O.popupRender=function(n){var e=Ve(T),t=Ye("div"),o=Ye("div"),i=Ye("div"),r=Ye("div"),a=Ye("hr"),c=Ye("div"),m=Ye("div"),l=Ye("div"),d=Ye("hr"),s=Ye("div"),u=Ye("div"),p=Ye("div"),v=Ye("input"),f=Ye("button"),h=Ye("div"),g=Ye("a"),x=Ye("div"),b=Ye("a"),w=Ye("div");t.id=H,s.id=C,v.id=N,f.id=L,h.id=S,x.id=A,i.id=E,o.id=M,a.id=R,c.id=D,m.id=I,d.id=U,je(e,"login-box-container"),je(t,"login-box"),je(s,"login-box-subtitle"),je(u,"email-container"),je(p,"email"),je(v,"input"),je(f,"email-button"),je(h,"forgot-link-container"),je(g,"forgot-link"),je(x,"login-link-container"),je(b,"login-link"),je(o,"login-box-subtitle"),je(i,"oauth-buttons-container"),je(r,"oauth-buttons"),je(c,"login-box-subtitle"),je(m,"oauth-buttons-container"),je(l,"oauth-buttons"),je(w,"login-box-close"),je(de,"root-min-height"),g.innerText=et("Forgot your password?"),b.innerText=et("Don't have an account? Sign up."),s.innerText=et("Login with your email address"),f.innerText=et("Continue"),c.innerText=et("Proceed with social login"),o.innerText=et("Proceed with ")+parent.location.host+et(" authentication"),Xe(f,O.passwordAsk,n),Ge(v,O.nextInput(v,O.passwordAsk),n),Xe(g,O.forgotPassword,n),Xe(b,O.popupSwitch,n),Xe(w,O.loginBoxClose),Je(e,"style","display: none; opacity: 0;"),Je(v,"name","email"),Je(v,"placeholder",et("Email address")),Je(v,"type","text");var y,k=0;["google","twitter","github","gitlab"].forEach(function(e){var t;Ae[e]&&(je(t=Ye("button"),"button"),je(t,e+"-button"),t.innerText=e,Xe(t,O.commentoAuth,{provider:e,id:n}),ze(l,t),k++)}),Ae.sso&&(je(y=Ye("button"),"button"),je(y,"sso-button"),y.innerText=et("Single Sign-On"),Xe(y,O.commentoAuth,{provider:"sso",id:n}),ze(r,y),ze(i,r),ze(t,o),ze(t,i),(0<k||Ae.commento)&&ze(t,a)),Oe=0<k&&(ze(t,c),ze(m,l),ze(t,m),!0),ze(p,v),ze(p,f),ze(u,p),ze(h,g),ze(x,b),0<k&&Ae.commento&&ze(t,d),Ae.commento&&(ze(t,s),ze(t,u),ze(t,h),ze(t,x)),ze(t,w),Ee="login",e.innerHTML="",ze(e,t)},O.forgotPassword=function(){window.open("","_blank").location=me+"/forgot?commenter=true",O.loginBoxClose()},O.popupSwitch=function(e){var t=Ve(C);Oe&&(_e(Ve(I)),_e(Ve(D)),_e(Ve(R)),_e(Ve(U))),Ae.sso&&(_e(Ve(E)),_e(Ve(M)),_e(Ve(R)),_e(Ve(U))),_e(Ve(A)),_e(Ve(S)),t.innerText=et("Create an account"),Ee="signup",O.passwordAsk(e)},O.login=function(e){var t=Ve(N),n=Ve(v);At(t.value,n.value,e)},O.signup=function(t){var n=Ve(N),e=Ve(f),o=Ve(h),i=Ve(v),o={email:n.value,name:e.value,website:o.value,password:i.value};Ke(me+"/api/commenter/new",o,function(e){return e.success?(lt(),void At(n.value,i.value,t)):(O.loginBoxClose(),void mt(e.message))})},O.passwordAsk=function(e){var t,n,o,i,r=Ve(H),a=Ve(C);_e(Ve(L)),_e(Ve(A)),_e(Ve(S)),Oe&&0<Ae.length&&(_e(Ve(R)),_e(Ve(U)),_e(Ve(D)),_e(Ve(I))),i="signup"===Ee?(t=["name","website","password"],n=[f,h,v],o=["text","text","password"],[et("Real Name"),et("Website (Optional)"),et("Password")]):(t=["password"],n=[v],o=["password"],[et("Password")]),a.innerText=et("signup"===Ee?"Finish the rest of your profile to complete.":"Enter your password to log in.");for(var c=0;c<t.length;c++){var m,l=Ye("div"),d=Ye("div"),s=Ye("input");s.id=n[c],je(l,"email-container"),je(d,"email"),je(s,"input"),Je(s,"name",t[c]),Je(s,"type",o[c]),Je(s,"placeholder",i[c]),"website"===t[c]&&Je(s,"autocomplete","false"),ze(d,s),ze(l,d),"password"===t[c]?(je(m=Ye("button"),"email-button"),"signup"===(m.innerText=Ee)?(Xe(m,O.signup,e),Ge(s,O.signup,e)):(Xe(m,O.login,e),Ge(s,O.login,e)),ze(d,m)):Ge(s,O.nextInput(s,null),e),ze(r,l)}for(var u=Array.prototype.slice.call(p.querySelectorAll(".commento-input")),c=0;c<u.length;c++)if(""===u[c].value.trim()){u[c].focus();break}},O.threadLockToggle=function(){var e=Ve(n);He=!He,e.disabled=!0,Mt(function(){e.disabled=!1,t(Ct)})},O.commentSticky=function(t){var e;"none"!==Ce&&(qe(e=Ve(ee+Ce),"option-unsticky"),je(e,"option-sticky")),Ce=Ce===t?"none":t,Mt(function(){var e=Ve(ee+t);Ce===t?(qe(e,"option-sticky"),je(e,"option-unsticky")):(qe(e,"option-unsticky"),je(e,"option-sticky"))})},O.loginBoxClose=function(){var e=Ve(m),t=Ve(T);qe(e,"blurred"),qe(de,"root-min-height"),Je(t,"style","display: none")},O.loginBoxShow=function(e){var t=Ve(m),n=Ve(T);O.popupRender(e),je(t,"blurred"),Je(n,"style",""),Ve(T).scrollIntoView({behavior:"smooth"})},O.main=function(e){var t,n,o,i,r;Pe={"score-desc":et("Upvotes"),"creationdate-desc":et("Newest"),"creationdate-asc":et("Oldest")},null!==(de=Ve(c))?(null===De&&(De=de.getBoundingClientRect().width<450),je(de,"root"),"true"!==a&&je(de,"root-font"),(o=Ye("div")).id=T,ze(de,o),(i=Ye("div")).id=d,je(i,"error-box"),Je(i,"style","display: none;"),ze(de,i),(r=Ye("div")).id=m,je(r,"main-area"),Je(r,"style","display: none"),ze(de,r),Et(),n=Ye("div"),o=Ye("div"),i=Ye("a"),r=Ye("span"),n.id="commento-footer",je(n,"footer"),je(o,"logo-container"),je(i,"logo"),je(r,"logo-text"),Je(i,"href","https://commento.net"),Je(i,"target","_blank"),Je(i,"rel","noreferrer"),r.innerText="commento.net",ze(i,r),ze(o,i),ze(n,o),t=n,at(le+"/css/commento.css",Ot),rt(function(){ct(function(){Et(),ht(function(){Ct(),ze(de,t),Dt(),Bt(),function(){for(var e=p.getElementsByClassName("commento-name"),t=0;t<e.length;t++)Je(e[t],"style","max-width: "+(e[t].getBoundingClientRect().width+20)+"px;")}(),Qe(e)})})})):console.log("[commento] error: no root element with ID '"+c+"' found")},O.reInit=function(e){se=e.pageId||se,c=e.idRoot||c,de=Ve(c),a=e.noFonts||a,B=e.hideDeleted||B,o=e.cssOverride||o,null===e.cssOverride&&(o=void 0),t()};var Pt=function(){var e=p.readyState;"loading"===e?p.addEventListener("readystatechange",Pt):"interactive"!==e&&"complete"!==e||Ut()};Pt()}(window.commento,document),function(){"use strict";var i;var H="http://www.w3.org/1999/xhtml",C="undefined"==typeof document?void 0:document,r=!!C&&"content"in C.createElement("template"),a=!!C&&C.createRange&&"createContextualFragment"in C.createRange();function N(e){return e=e.trim(),r?(t=e,(n=C.createElement("template")).innerHTML=t,n.content.childNodes[0]):a?(o=e,i||(i=C.createRange()).selectNode(C.body),i.createContextualFragment(o).childNodes[0]):(o=e,(e=C.createElement("body")).innerHTML=o,e.childNodes[0]);var t,n,o}function L(e,t){var n=e.nodeName,o=t.nodeName;return n===o||(e=n.charCodeAt(0),t=o.charCodeAt(0),e<=90&&97<=t?n===o.toUpperCase():t<=90&&97<=e&&o===n.toUpperCase())}function c(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var S,A={OPTION:function(e,t){var n,o=e.parentNode;o&&("SELECT"!==(n="OPTGROUP"===(n=o.nodeName.toUpperCase())?(o=o.parentNode)&&o.nodeName.toUpperCase():n)||o.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),o.selectedIndex=-1)),c(e,t,"selected")},INPUT:function(e,t){c(e,t,"checked"),c(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},tEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var o=e.firstChild;o&&((t=o.nodeValue)===n||!n&&t===e.placeholder||(o.nodeValue=n))},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n,o,i=-1,r=0,a=e.firstChild;a;)if("OPTGROUP"===(o=a.nodeName&&a.nodeName.toUpperCase()))a=(n=a).firstChild;else{if("OPTION"===o){if(a.hasAttribute("selected")){i=r;break}r++}!(a=a.nextSibling)&&n&&(a=n.nextSibling,n=null)}e.selectedIndex=i}}};function M(){}function E(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}window.morphdom=(S=function(e,t){var n,o,i,r,a=t.attributes;if(11!==t.nodeType&&11!==e.nodeType){for(var c=a.length-1;0<=c;c--)o=(n=a[c]).name,i=n.namespaceURI,r=n.value,i?(o=n.localName||o,e.getAttributeNS(i,o)!==r&&("xmlns"===n.prefix&&(o=n.name),e.setAttributeNS(i,o,r))):e.getAttribute(o)!==r&&e.setAttribute(o,r);for(var m=e.attributes,l=m.length-1;0<=l;l--)o=(n=m[l]).name,(i=n.namespaceURI)?(o=n.localName||o,t.hasAttributeNS(i,o)||e.removeAttributeNS(i,o)):t.hasAttribute(o)||e.removeAttribute(o)}},function(e,t,n){n=n||{},"string"==typeof t&&("#document"===e.nodeName||"HTML"===e.nodeName||"BODY"===e.nodeName?(d=t,(t=C.createElement("html")).innerHTML=d):t=N(t));var p=n.getNodeKey||E,v=n.onBeforeNodeAdded||M,f=n.onNodeAdded||M,i=n.onBeforeElUpdated||M,r=n.onElUpdated||M,o=n.onBeforeNodeDiscarded||M,a=n.onNodeDiscarded||M,c=n.onBeforeElChildrenUpdated||M,m=!0===n.childrenOnly,h=Object.create(null),l=[];function g(e){l.push(e)}function x(e,t,n){!1!==o(e)&&(t&&t.removeChild(e),a(e),function e(t,n){if(1===t.nodeType)for(var o=t.firstChild;o;){var i=void 0;n&&(i=p(o))?g(i):(a(o),o.firstChild&&e(o,n)),o=o.nextSibling}}(e,n))}function b(e,t,n){var o=p(t);if(o&&delete h[o],!n){if(!1===i(e,t))return;if(S(e,t),r(e),!1===c(e,t))return}"TEXTAREA"!==e.nodeName?function(e,t){var n,o,i,r,a,c=t.firstChild,m=e.firstChild;e:for(;c;){for(r=c.nextSibling,n=p(c);m;){if(i=m.nextSibling,c.isSameNode&&c.isSameNode(m)){c=r,m=i;continue e}o=p(m);var l=m.nodeType,d=void 0;if(l===c.nodeType&&(1===l?(n?n!==o&&(!(a=h[n])||i===a?d=!1:(e.insertBefore(a,m),o?g(o):x(m,e,!0),m=a)):o&&(d=!1),(d=!1!==d&&L(m,c))&&b(m,c)):3!==l&&8!==l||(d=!0,m.nodeValue!==c.nodeValue&&(m.nodeValue=c.nodeValue))),d){c=r,m=i;continue e}o?g(o):x(m,e,!0),m=i}var s;n&&(a=h[n])&&L(a,c)?(e.appendChild(a),b(a,c)):!1!==(s=v(c))&&((c=s?s:c).actualize&&(c=c.actualize(e.ownerDocument||C)),e.appendChild(c),function e(t){f(t);for(var n=t.firstChild;n;){var o,i=n.nextSibling,r=p(n);r&&(o=h[r])&&L(n,o)?(n.parentNode.replaceChild(o,n),b(o,n)):e(n),n=i}}(c)),c=r,m=i}!function(e,t,n){for(;t;){var o=t.nextSibling;(n=p(t))?g(n):x(t,e,!0),t=o}}(e,m);var u=A[e.nodeName];u&&u(e,t)}(e,t):A.tEXTAREA(e,t)}!function e(t){if(1===t.nodeType||11===t.nodeType)for(var n=t.firstChild;n;){var o=p(n);o&&(h[o]=n),e(n),n=n.nextSibling}}(e);var d,s=e,u=s.nodeType,w=t.nodeType;if(!m)if(1===u)1===w?L(e,t)||(a(e),s=function(e,t){for(var n=e.firstChild;n;){var o=n.nextSibling;t.appendChild(n),n=o}return t}(e,(d=t.nodeName,(n=t.namespaceURI)&&n!==H?C.createElementNS(n,d):C.createElement(d)))):s=t;else if(3===u||8===u){if(w===u)return s.nodeValue!==t.nodeValue&&(s.nodeValue=t.nodeValue),s;s=t}if(s===t)a(e);else{if(t.isSameNode&&t.isSameNode(s))return;if(b(s,t,m),l)for(var y=0,k=l.length;y<k;y++){var T=h[l[y]];T&&x(T,T.parentNode,!1)}}return!m&&s!==e&&e.parentNode&&(s.actualize&&(s=s.actualize(e.ownerDocument||C)),e.parentNode.replaceChild(s,e)),s})}();